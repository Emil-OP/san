<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/>
        <title>Document</title>
    </head>
    <body>
        <!-- Header -->
        <div class="header flexRow">
            <div class="material-icons headerBtn" id="menuBtn" tabIndex="0">menu</div>
            <div class="headerTitle">Clientes</div>
            <div class="material-icons headerBtn" id="searchBtn" tabIndex="1">search</div>
        </div>

        <!-- Container -->
        <div class="container flexRow">

            <!-- Sidebar -->
            <div class="sideBar flexColumn" id="sideBar">
                
                <div class="sideBarItem flexRow"  tabIndex="2">
                    <i class="material-icons sideBarIcon">savings</i>
                    <div class="sideBarLabel">
                        San
                    </div>
                </div>
                <div class="sideBarItem flexRow" tabIndex="3">
                    <i class="material-icons sideBarIcon">groups</i>
                    <div class="sideBarLabel">
                        Clientes
                    </div>
                </div>
                <div class="sideBarItem flexRow" tabIndex="4">
                    <i class="material-icons sideBarIcon">attach_money</i>
                    <div class="sideBarLabel">
                        Pagos
                    </div>               
                </div>
            </div>

            <!-- Focus -->

            <div class="focus" id="focus"></div>

            <!-- Main Content -->
            <div class="mainContent flexColumn">
                <div class = "gridTable">
                    <div class="gridRow gridTableHeader">
                        <div class="gridTableHeaderItem" id="colNombre">Nombre</div>
                        <div class="gridTableHeaderItem" id="colApellido">Apellido</div>
                        <div class="gridTableHeaderItem" id="colTelefono">Telefono</div>
                        <div class="gridTableHeaderItem" id="colUbicacion">Ubicacion</div>
                        <div class="gridTableHeaderItem" id="colSanes">Sanes</div>
                        <div class="gridTableHeaderItem" id="colCredito">Credito</div>
                    </div>
                    
                    <div class="gridTableBody" id="tableClientes">
                        
                    <div class="loading">Cargando clientes...</div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            fetch('selectCliente.php')
            .then(res => res.json())
            .then(data => {
                if (!data.success) throw new Error(data.error);
                const tableBody = document.getElementById("tableClientes");
                tableBody.innerHTML = data.data.map(cliente => `
                <div class="gridRow">
                    <div class="gridTableItem" id="colNombre">${cliente.nombre}</div>
                    <div class="gridTableItem" id="colApellido">${cliente.apellido}</div>
                    <div class="gridTableItem" id="colTelefono">${cliente.numeroTelefono}</div>
                    <div class="gridTableItem" id="colUbicacion">${cliente.direccion}</div>
                    <div class="gridTableItem" id="colSanes">${cliente.sanesActivos}</div>
                    <div class="gridTableItem" id="colCredito">$${parseFloat(cliente.credito).toFixed(2)}</div>
                </div>
                `).join('');
            })
            .catch(err => {
                console.error(err);
                document.getElementById("tableClientes").innerHTML = `
                    <div class="error">${err.message}</div>
                `;
            });
        </script>

        <script>
            const menuBtn = document.getElementById("menuBtn");
            const sideBar = document.getElementById("sideBar");
            const focusOverlay = document.getElementById("focus");
            const sideBarItems = document.querySelectorAll(".sideBarItem");

            function openSidebar() {
                sideBar.classList.add('open');
                focusOverlay.classList.add('active');
            }

            function closeSidebar() {
                sideBar.classList.remove('open');
                focusOverlay.classList.remove('active');
            }

             menuBtn.addEventListener('click', openSidebar);
             focusOverlay.addEventListener('click', closeSidebar);
             sideBarItems.forEach(item => {
            item.addEventListener('click', closeSidebar);
        });
            
        </script>

        
    </body>
</html>